(function(){"use strict";var a;a=angular.module("todoApp",["ngCookies","ngResource","ngSanitize","ngRoute","Parse"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/front.html",controller:"AuthCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";var a,b,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a="HmmJwp2AaCHVSmG1a7tPZHUMnUwxLbrinqGrr9tE",b="jQ6DQhNXE3AfInnarLbZnLFQz90MgzdCl5kbiIrk",c=angular.module("todoApp"),c.run(["Parse",function(a){return a.auth.resumeSession()}]),c.config(["ParseProvider",function(c){return c.initialize(a,b)}]),c.factory("TODO",["Parse",function(a){var b,c;return b=function(a){function b(){return c=b.__super__.constructor.apply(this,arguments)}return e(b,a),b.configure("Todo","text","done","UserId"),b}(a.Model)}]),c.controller("TodoCtrl",["$scope","TODO","Parse",function(a,b,c){var d,e;return a.auth=c.auth,d=function(){return b.query().then(function(b){return console.log(b),a.todos=b,b})},e=function(a){return a.forEach(function(a){return a.isNew()?a.save():a.update()})},d(),a.addTodo=function(c){var d;return d=new b,d.text=c.text,d.done=!1,d.UserId=a.auth.currentUser.objectId,console.log("going out",d),a.todos.push(d),a.syncData()},a.completeTodo=function(b){var c;return a.todos[b].done=!a.todos[b].done,c=a.todos[b],console.log(c),c.update()},a.save=function(){var c;return c=new b,c.text=a.todoText,c.done=!1,a.addTodo(c)},a.syncData=function(){return e(a.todos)},a.destroy=function(){var b;return b=void 0,b=a.todos,a.todos=[],b.forEach(function(b){return b.done?b.destroy():a.todos.push(b)}),a.syncData()}}]),c.controller("AuthCtrl",["$scope","Parse",function(a,b){return a.auth=b.auth,a.signout=function(){return console.log("Signing Out"),b.auth.logout()}}]),c.controller("SigninCtrl",["$scope","Parse",function(a,b){return a.auth=b.auth,a.user={},a.errorMessage=null,a.signin=function(c){return c.username&&c.password?b.auth.login(c.username,c.password).then(function(){return console.log(arguments)},function(b){return a.errorMessage=b.data.error}):a.errorMessage="Please supply a username and password"}}]),c.controller("RegisterCtrl",["$scope","Parse",function(a,b){return a.auth=b.auth,a.user={},a.errorMessage=null,a.register=function(c){return c.password!==c.passwordConfirm?a.errorMessage="Passwords must match":c.username&&c.password?b.auth.register(c.username,c.password).then(function(){return console.log("in")},function(b){return a.errorMessage=b.data.error}):a.errorMessage="Please supply a username and password"}}])}.call(this);